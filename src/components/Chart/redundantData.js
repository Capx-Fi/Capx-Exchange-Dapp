let Stockdata = [
  { tid: 283945, date: 1384934366, amount: "0.08180000", price: "501.30" },
  { tid: 283947, date: 1384934066, amount: "0.06110000", price: "490.66" },
  { tid: 283959, date: 1384935798, amount: "2.60000000", price: "386.34" },
  { tid: 283961, date: 1384935848, amount: "1.00000000", price: "400.00" },
  { tid: 283963, date: 1384935780, amount: "1.00000000", price: "400.00" },
  { tid: 283966, date: 1384936843, amount: "0.17334000", price: "476.64" },
  { tid: 283969, date: 1384936405, amount: "0.73000000", price: "468.73" },
  { tid: 283970, date: 1384936606, amount: "0.17130000", price: "496.20" },
  { tid: 283981, date: 1384938700, amount: "1.17620000", price: "425.10" },
  { tid: 283986, date: 1384938907, amount: "1.17620000", price: "425.10" },
  { tid: 283987, date: 1384939216, amount: "1.21370000", price: "411.98" },
  { tid: 283988, date: 1384938978, amount: "0.04020000", price: "498.00" },
  { tid: 283990, date: 1384939405, amount: "2.00000000", price: "427.07" },
  { tid: 283993, date: 1384939047, amount: "0.60030000", price: "433.11" },
  { tid: 283994, date: 1384939787, amount: "0.39020000", price: "433.11" },
  { tid: 283995, date: 1384939573, amount: "0.26000000", price: "350.00" },
  { tid: 283997, date: 1384939671, amount: "1.17930000", price: "423.99" },
  { tid: 284002, date: 1384940302, amount: "0.30000000", price: "489.54" },
  { tid: 284003, date: 1384940441, amount: "0.34970000", price: "429.00" },
  { tid: 284004, date: 1384940312, amount: "1.36000000", price: "351.00" },
  { tid: 284005, date: 1384940036, amount: "0.07010000", price: "427.99" },
  { tid: 284006, date: 1384940226, amount: "0.07240683", price: "350.00" },
  { tid: 284007, date: 1384939819, amount: "0.06000000", price: "427.99" },
  { tid: 284008, date: 1384940058, amount: "0.19582603", price: "350.00" },
  { tid: 284010, date: 1384940585, amount: "0.41960000", price: "424.21" },
  { tid: 284015, date: 1384940913, amount: "0.64650000", price: "433.11" },
  { tid: 284016, date: 1384941317, amount: "0.18380000", price: "327.87" },
  { tid: 284018, date: 1384940927, amount: "0.25000000", price: "400.00" },
  { tid: 284019, date: 1384941012, amount: "0.81750000", price: "400.00" },
  { tid: 284020, date: 1384941341, amount: "0.25000000", price: "400.00" },
  { tid: 284025, date: 1384942185, amount: "0.77350000", price: "536.49" },
  { tid: 284026, date: 1384941872, amount: "0.30510000", price: "491.66" },
  { tid: 284028, date: 1384941801, amount: "0.12100000", price: "413.33" },
  { tid: 284029, date: 1384942078, amount: "0.50000000", price: "345.00" },
  { tid: 284031, date: 1384941821, amount: "1.18790000", price: "413.33" },
  { tid: 284032, date: 1384941698, amount: "0.50000000", price: "400.00" },
  { tid: 284033, date: 1384942003, amount: "0.50000000", price: "400.00" },
  { tid: 284035, date: 1384941858, amount: "1.00000000", price: "294.50" },
  { tid: 284036, date: 1384942403, amount: "0.32760000", price: "396.81" },
  { tid: 284042, date: 1384942691, amount: "0.27990000", price: "535.83" },
  { tid: 284045, date: 1384942765, amount: "0.06930000", price: "490.88" },
  { tid: 284046, date: 1384942912, amount: "0.16000000", price: "469.77" },
  { tid: 284047, date: 1384942969, amount: "0.13840000", price: "469.77" },
  { tid: 284048, date: 1384942690, amount: "0.50000000", price: "330.00" },
  { tid: 284049, date: 1384942642, amount: "0.49180000", price: "387.00" },
  { tid: 284050, date: 1384942885, amount: "0.46730000", price: "427.99" },
  { tid: 284052, date: 1384943724, amount: "0.77000000", price: "429.00" },
  { tid: 284053, date: 1384943970, amount: "14.90000000", price: "317.58" },
  { tid: 284055, date: 1384943694, amount: "0.10000000", price: "483.92" },
  { tid: 284058, date: 1384944705, amount: "0.31000000", price: "330.00" },
  { tid: 284059, date: 1384944956, amount: "0.14000000", price: "412.52" },
  { tid: 284060, date: 1384945039, amount: "0.30000000", price: "391.13" },
  { tid: 284066, date: 1384945333, amount: "0.75000000", price: "348.46" },
  { tid: 284068, date: 1384945473, amount: "3.00500000", price: "330.00" },
  { tid: 284069, date: 1384945203, amount: "1.00000000", price: "331.00" },
  { tid: 284070, date: 1384945261, amount: "0.71500000", price: "400.00" },
  { tid: 284071, date: 1384945396, amount: "2.00000000", price: "355.93" },
  { tid: 284072, date: 1384945878, amount: "0.11910000", price: "419.89" },
  { tid: 284075, date: 1384946137, amount: "0.11240000", price: "445.03" },
  { tid: 284076, date: 1384946203, amount: "0.12090000", price: "438.46" },
  { tid: 284077, date: 1384946472, amount: "0.07270000", price: "426.63" },
  { tid: 284078, date: 1384946525, amount: "0.12170000", price: "427.29" },
  { tid: 284079, date: 1384946660, amount: "0.11520000", price: "427.29" },
  { tid: 284080, date: 1384946726, amount: "0.12400000", price: "427.29" },
  { tid: 284081, date: 1384946753, amount: "0.12400000", price: "427.29" },
  { tid: 284082, date: 1384946835, amount: "0.12350000", price: "427.29" },
  { tid: 284085, date: 1384946309, amount: "2.21000000", price: "380.00" },
  { tid: 284089, date: 1384946776, amount: "0.29990000", price: "355.93" },
  { tid: 284091, date: 1384946549, amount: "0.11430000", price: "419.89" },
  { tid: 284092, date: 1384946657, amount: "0.06000000", price: "418.50" },
  { tid: 284094, date: 1384947384, amount: "1.92680000", price: "519.00" },
  { tid: 284095, date: 1384947367, amount: "0.12400000", price: "427.36" },
  { tid: 284098, date: 1384947751, amount: "0.77740000", price: "424.50" },
  { tid: 284099, date: 1384947852, amount: "0.38190000", price: "419.00" },
  { tid: 284100, date: 1384947389, amount: "0.03580000", price: "418.50" },
  { tid: 284101, date: 1384947056, amount: "0.12150000", price: "411.44" },
  { tid: 284102, date: 1384947455, amount: "0.99900000", price: "359.20" },
  { tid: 284103, date: 1384947513, amount: "0.99980000", price: "333.00" },
  { tid: 284104, date: 1384947799, amount: "0.12457595", price: "293.89" },
  { tid: 284106, date: 1384948106, amount: "0.11630000", price: "429.91" },
  { tid: 284107, date: 1384948131, amount: "0.12270000", price: "429.91" },
  { tid: 284108, date: 1384948193, amount: "0.25120000", price: "429.91" },
  { tid: 284109, date: 1384948325, amount: "0.00500000", price: "425.31" },
  { tid: 284110, date: 1384948348, amount: "0.12460000", price: "425.31" },
  { tid: 284111, date: 1384948377, amount: "0.13670000", price: "387.77" },
  { tid: 284112, date: 1384948435, amount: "0.13670000", price: "387.77" },
  { tid: 284113, date: 1384948240, amount: "0.30060000", price: "332.70" },
  { tid: 284114, date: 1384948546, amount: "0.70000000", price: "332.70" },
  { tid: 284115, date: 1384948302, amount: "0.46060000", price: "412.52" },
  { tid: 284116, date: 1384948286, amount: "1.00000000", price: "410.00" },
  { tid: 284117, date: 1384948332, amount: "1.16620000", price: "428.75" },
  { tid: 284118, date: 1384948552, amount: "0.13950000", price: "358.44" },
  { tid: 284124, date: 1384948993, amount: "0.13670000", price: "387.77" },
  { tid: 284125, date: 1384949016, amount: "0.13670000", price: "387.77" },
  { tid: 284126, date: 1384949106, amount: "0.13320000", price: "397.70" },
  { tid: 284128, date: 1384949472, amount: "0.30060000", price: "332.70" },
  { tid: 284129, date: 1384949020, amount: "0.30060000", price: "332.70" },
  { tid: 284130, date: 1384948872, amount: "0.25000000", price: "332.70" },
  { tid: 284131, date: 1384949375, amount: "1.36700000", price: "358.44" },
  { tid: 284132, date: 1384949640, amount: "0.10000000", price: "380.00" },
  { tid: 284133, date: 1384949042, amount: "2.57070000", price: "389.00" },
  { tid: 284135, date: 1384949583, amount: "0.69000000", price: "363.00" },
  { tid: 284137, date: 1384949875, amount: "0.82240000", price: "304.00" },
  { tid: 284139, date: 1384949769, amount: "25.14460000", price: "397.70" },
  { tid: 284140, date: 1384949844, amount: "0.13000000", price: "405.96" },
  { tid: 284141, date: 1384949901, amount: "0.13430000", price: "390.86" },
  { tid: 284142, date: 1384949938, amount: "0.09600000", price: "407.28" },
  { tid: 284143, date: 1384949974, amount: "0.13120000", price: "403.96" },
  { tid: 284144, date: 1384950267, amount: "0.13270000", price: "395.65" },
  { tid: 284145, date: 1384950319, amount: "0.12680000", price: "394.80" },
  { tid: 284146, date: 1384950496, amount: "0.13230000", price: "400.71" },
  { tid: 284147, date: 1384950513, amount: "0.12790000", price: "410.43" },
  { tid: 284152, date: 1384950019, amount: "1.00000000", price: "450.00" },
  { tid: 284153, date: 1384949994, amount: "0.50000000", price: "355.93" },
  { tid: 284155, date: 1384949783, amount: "0.11130000", price: "332.00" },
  { tid: 284156, date: 1384950429, amount: "0.01000000", price: "332.00" },
  { tid: 284157, date: 1384950844, amount: "0.03000000", price: "407.28" },
  { tid: 284158, date: 1384950620, amount: "0.15490000", price: "345.00" },
  { tid: 284159, date: 1384951455, amount: "0.31650000", price: "474.00" },
  { tid: 284160, date: 1384951472, amount: "0.14460000", price: "415.00" },
  { tid: 284161, date: 1384951372, amount: "0.06510000", price: "415.00" },
  { tid: 284162, date: 1384950813, amount: "0.16640000", price: "420.58" },
  { tid: 284165, date: 1384951610, amount: "1.00000000", price: "535.83" },
  { tid: 284166, date: 1384951652, amount: "0.11000000", price: "418.12" },
  { tid: 284167, date: 1384951694, amount: "0.10160000", price: "408.00" },
  { tid: 284168, date: 1384951709, amount: "0.12910000", price: "408.66" },
  { tid: 284169, date: 1384951735, amount: "0.11550000", price: "408.92" },
  { tid: 284170, date: 1384951758, amount: "0.13680000", price: "387.32" },
  { tid: 284171, date: 1384951774, amount: "0.13540000", price: "387.32" },
  { tid: 284172, date: 1384951805, amount: "0.13750000", price: "384.77" },
  { tid: 284173, date: 1384951992, amount: "0.14790000", price: "345.30" },
  { tid: 284174, date: 1384951912, amount: "0.98440000", price: "478.39" },
  { tid: 284175, date: 1384952015, amount: "0.15020000", price: "352.82" },
  { tid: 284176, date: 1384952032, amount: "0.50000000", price: "351.30" },
  { tid: 284177, date: 1384952129, amount: "0.02940000", price: "340.65" },
  { tid: 284178, date: 1384952146, amount: "0.15030000", price: "352.56" },
  { tid: 284179, date: 1384952355, amount: "0.14940000", price: "352.56" },
  { tid: 284180, date: 1384951544, amount: "5.90000000", price: "488.22" },
  { tid: 284182, date: 1384952058, amount: "2.00000000", price: "350.84" },
  { tid: 284183, date: 1384952171, amount: "10.00000000", price: "399.00" },
  { tid: 284184, date: 1384952069, amount: "0.19000000", price: "421.00" },
  { tid: 284185, date: 1384952308, amount: "0.12510000", price: "399.55" },
  { tid: 284186, date: 1384952161, amount: "0.02640000", price: "378.46" },
  { tid: 284187, date: 1384951731, amount: "0.05280000", price: "378.46" },
  { tid: 284188, date: 1384952128, amount: "0.87800000", price: "375.84" },
  { tid: 284189, date: 1384952162, amount: "0.55490000", price: "378.46" },
  { tid: 284194, date: 1384952864, amount: "2.00000000", price: "533.00" },
  { tid: 284195, date: 1384952426, amount: "0.01130000", price: "354.60" },
  { tid: 284196, date: 1384952438, amount: "0.11470000", price: "348.67" },
  { tid: 284197, date: 1384952457, amount: "0.05000000", price: "344.73" },
  { tid: 284198, date: 1384952479, amount: "0.11230000", price: "346.17" },
  { tid: 284199, date: 1384952504, amount: "0.23180000", price: "345.08" },
  { tid: 284200, date: 1384952519, amount: "0.02900000", price: "344.99" },
  { tid: 284201, date: 1384952536, amount: "0.15360000", price: "344.99" },
  { tid: 284202, date: 1384952567, amount: "0.03200000", price: "343.85" },
  { tid: 284203, date: 1384952591, amount: "0.15000000", price: "342.10" },
  { tid: 284204, date: 1384952616, amount: "0.15000000", price: "339.64" },
  { tid: 284205, date: 1384952633, amount: "0.15100000", price: "339.64" },
  { tid: 284206, date: 1384952651, amount: "0.24030000", price: "333.74" },
  { tid: 284207, date: 1384952668, amount: "0.15000000", price: "331.77" },
  { tid: 284208, date: 1384952683, amount: "0.15910000", price: "331.77" },
  { tid: 284209, date: 1384952696, amount: "0.15520000", price: "331.77" },
  { tid: 284210, date: 1384952710, amount: "0.15910000", price: "331.77" },
  { tid: 284211, date: 1384953186, amount: "0.50810000", price: "335.04" },
  { tid: 284212, date: 1384953202, amount: "0.31410000", price: "318.92" },
  { tid: 284213, date: 1384952940, amount: "0.10340000", price: "386.89" },
  { tid: 284214, date: 1384952652, amount: "0.14490000", price: "400.38" },
  { tid: 284215, date: 1384953226, amount: "0.04000000", price: "458.38" },
  { tid: 284216, date: 1384952462, amount: "0.09520000", price: "420.00" },
  { tid: 284217, date: 1384953155, amount: "0.02220000", price: "450.62" },
  { tid: 284218, date: 1384953194, amount: "0.08000000", price: "380.70" },
  { tid: 284219, date: 1384952481, amount: "0.10510000", price: "380.70" },
  { tid: 284220, date: 1384952777, amount: "0.07393333", price: "363.00" },
  { tid: 284225, date: 1384953651, amount: "0.11447417", price: "332.00" },
  { tid: 284226, date: 1384954123, amount: "0.10010000", price: "399.55" },
  { tid: 284227, date: 1384953952, amount: "0.06320000", price: "395.43" },
  { tid: 284229, date: 1384954047, amount: "1.32280000", price: "378.00" },
  { tid: 284230, date: 1384953821, amount: "0.15000000", price: "359.86" },
  { tid: 284237, date: 1384955061, amount: "0.03380000", price: "443.67" },
  { tid: 284241, date: 1384955715, amount: "4.70000000", price: "330.00" },
  { tid: 284242, date: 1384955473, amount: "0.65790000", price: "380.00" },
  { tid: 284243, date: 1384955191, amount: "0.90000000", price: "380.00" },
  { tid: 284244, date: 1384955482, amount: "0.26320000", price: "380.00" },
  { tid: 284245, date: 1384955820, amount: "3.42110000", price: "380.00" },
  { tid: 284247, date: 1384955837, amount: "2.00000000", price: "339.25" },
  { tid: 284248, date: 1384955647, amount: "0.21160000", price: "378.00" },
  { tid: 284250, date: 1384955768, amount: "1.00000000", price: "453.40" },
  { tid: 284252, date: 1384955131, amount: "1.57790000", price: "401.80" },
  { tid: 284253, date: 1384955842, amount: "0.47000000", price: "352.25" },
  { tid: 284261, date: 1384956406, amount: "1.10751403", price: "351.54" },
  { tid: 284263, date: 1384956217, amount: "0.98970000", price: "390.01" },
  { tid: 284265, date: 1384956349, amount: "0.33670000", price: "399.99" },
  { tid: 284266, date: 1384956097, amount: "1.29410000", price: "408.00" },
  { tid: 284267, date: 1384956134, amount: "0.55140000", price: "453.40" },
  { tid: 284268, date: 1384956611, amount: "2.00000000", price: "329.09" },
  { tid: 284270, date: 1384956747, amount: "1.00000000", price: "399.00" },
  { tid: 284272, date: 1384956873, amount: "0.43110000", price: "399.00" },
  { tid: 284273, date: 1384956641, amount: "0.19668464", price: "344.71" },
  { tid: 284280, date: 1384957638, amount: "2.62620000", price: "330.00" },
  { tid: 284282, date: 1384957767, amount: "1.00000000", price: "399.00" },
  { tid: 284283, date: 1384957299, amount: "1.10000000", price: "330.00" },
  { tid: 284285, date: 1384957180, amount: "0.17000000", price: "448.58" },
  { tid: 284286, date: 1384956962, amount: "2.22980000", price: "448.48" },
  { tid: 284287, date: 1384957662, amount: "2.50460000", price: "340.18" },
  { tid: 284291, date: 1384958178, amount: "0.20020000", price: "399.55" },
  { tid: 284295, date: 1384957806, amount: "1.30000000", price: "401.00" },
  { tid: 284300, date: 1384957972, amount: "0.02120000", price: "472.25" },
  { tid: 284301, date: 1384958318, amount: "0.31200000", price: "480.80" },
  { tid: 284302, date: 1384958449, amount: "0.66000000", price: "431.12" },
  { tid: 284306, date: 1384959063, amount: "0.40260000", price: "380.00" },
  { tid: 284311, date: 1384958858, amount: "0.29900000", price: "334.48" },
  { tid: 284312, date: 1384958726, amount: "0.39200000", price: "431.12" },
  { tid: 284318, date: 1384959677, amount: "0.16320000", price: "380.00" },
  { tid: 284323, date: 1384960062, amount: "0.01000000", price: "535.17" },
  { tid: 284324, date: 1384959871, amount: "0.19950000", price: "401.00" },
  { tid: 284325, date: 1384959724, amount: "0.37000000", price: "401.00" },
  { tid: 284327, date: 1384960090, amount: "0.30040000", price: "329.54" },
  { tid: 284329, date: 1384960228, amount: "3.65850000", price: "410.00" },
  { tid: 284331, date: 1384960361, amount: "1.00000000", price: "415.90" },
  { tid: 284334, date: 1384960981, amount: "1.00000000", price: "525.52" },
  { tid: 284344, date: 1384960919, amount: "0.28000000", price: "370.59" },
  { tid: 284345, date: 1384961139, amount: "0.29950000", price: "333.86" },
  { tid: 284346, date: 1384960577, amount: "0.11770000", price: "424.81" },
  { tid: 284347, date: 1384960879, amount: "0.10000000", price: "461.00" },
  { tid: 284348, date: 1384960550, amount: "0.42000000", price: "415.90" },
  { tid: 284349, date: 1384961235, amount: "0.00960000", price: "521.20" },
  { tid: 284350, date: 1384961031, amount: "0.10230000", price: "488.63" },
  { tid: 284360, date: 1384961478, amount: "1.34680000", price: "371.24" },
  { tid: 284361, date: 1384961649, amount: "2.44740000", price: "380.00" },
  { tid: 284363, date: 1384961444, amount: "4.00000000", price: "369.60" },
  { tid: 284367, date: 1384961879, amount: "0.45750000", price: "458.99" },
  { tid: 284368, date: 1384961609, amount: "1.00000000", price: "473.88" },
  { tid: 284369, date: 1384961694, amount: "0.84070000", price: "475.78" },
  { tid: 284370, date: 1384961850, amount: "1.99200000", price: "475.78" },
  { tid: 284372, date: 1384961950, amount: "0.43570000", price: "458.99" },
  { tid: 284386, date: 1384962624, amount: "1.02000000", price: "396.51" },
  { tid: 284389, date: 1384962460, amount: "0.10000000", price: "380.00" },
  { tid: 284393, date: 1384962737, amount: "1.02000000", price: "401.00" },
  { tid: 284394, date: 1384962673, amount: "0.17000000", price: "404.37" },
  { tid: 284395, date: 1384962504, amount: "0.11130000", price: "404.37" },
  { tid: 284406, date: 1384963945, amount: "6.61230000", price: "529.32" },
  { tid: 284408, date: 1384963669, amount: "1.16000000", price: "396.51" },
  { tid: 284418, date: 1384963366, amount: "0.20000000", price: "469.00" },
  { tid: 284422, date: 1384964197, amount: "1.31580000", price: "380.00" },
  { tid: 284424, date: 1384964340, amount: "2.20000000", price: "476.07" },
  { tid: 284425, date: 1384964751, amount: "0.30350000", price: "329.54" },
  { tid: 284429, date: 1384964517, amount: "0.52510000", price: "476.07" },
  { tid: 284435, date: 1384964801, amount: "0.10990000", price: "455.13" },
  { tid: 284436, date: 1384964703, amount: "0.22340000", price: "447.64" },
  { tid: 284437, date: 1384964966, amount: "0.57008000", price: "405.46" },
  { tid: 284439, date: 1384965776, amount: "0.46240000", price: "480.10" },
  { tid: 284442, date: 1384965145, amount: "0.86180000", price: "441.73" },
  { tid: 284443, date: 1384965074, amount: "0.04460000", price: "448.58" },
  { tid: 284444, date: 1384965214, amount: "18.90000000", price: "340.23" },
  { tid: 284451, date: 1384965553, amount: "1.00000000", price: "408.21" },
  { tid: 284453, date: 1384965188, amount: "1.55660000", price: "449.71" },
  { tid: 284454, date: 1384965403, amount: "2.00000000", price: "448.77" },
  { tid: 284455, date: 1384965658, amount: "1.00000000", price: "452.75" },
  { tid: 284456, date: 1384965621, amount: "0.50000000", price: "447.56" },
  { tid: 284459, date: 1384966513, amount: "0.01901667", price: "330.00" },
  { tid: 284466, date: 1384966525, amount: "0.50000000", price: "454.99" },
  { tid: 284467, date: 1384966217, amount: "0.14520000", price: "364.44" },
  { tid: 284468, date: 1384966592, amount: "0.21980000", price: "454.99" },
  { tid: 284472, date: 1384966478, amount: "0.02530000", price: "475.00" },
  { tid: 284486, date: 1384967529, amount: "0.03620000", price: "552.97" },
  { tid: 284488, date: 1384967023, amount: "0.16780000", price: "447.00" },
  { tid: 284489, date: 1384967519, amount: "1.00000000", price: "430.39" },
  { tid: 284492, date: 1384968035, amount: "0.20000000", price: "525.74" },
  { tid: 284493, date: 1384967925, amount: "0.48740000", price: "615.49" },
  { tid: 284526, date: 1384968913, amount: "2.62000000", price: "437.07" },
  { tid: 284527, date: 1384969342, amount: "12.48440000", price: "480.60" },
  { tid: 284529, date: 1384968864, amount: "0.06710000", price: "446.98" },
  { tid: 284531, date: 1384969277, amount: "0.33560000", price: "447.00" },
  { tid: 284537, date: 1384969692, amount: "1.00000000", price: "453.40" },
  { tid: 284540, date: 1384969593, amount: "0.05570000", price: "449.00" },
  { tid: 284542, date: 1384970281, amount: "0.05000000", price: "446.98" },
  { tid: 284544, date: 1384969926, amount: "0.03000000", price: "446.98" },
  { tid: 284545, date: 1384970045, amount: "0.00840000", price: "592.05" },
  { tid: 284546, date: 1384969990, amount: "0.11190000", price: "446.98" },
  { tid: 284547, date: 1384970435, amount: "1.13000000", price: "442.89" },
  { tid: 284557, date: 1384970749, amount: "0.22370000", price: "447.00" },
  { tid: 284562, date: 1384970445, amount: "1.92730000", price: "458.99" },
  { tid: 284563, date: 1384970813, amount: "0.90580000", price: "441.59" },
  { tid: 284565, date: 1384970418, amount: "0.23765333", price: "421.55" },
  { tid: 284568, date: 1384970796, amount: "0.57000000", price: "419.23" },
  { tid: 284577, date: 1384972119, amount: "2.09110000", price: "430.39" },
  { tid: 284588, date: 1384971541, amount: "2.44000000", price: "409.91" },
  { tid: 284590, date: 1384971933, amount: "0.44940000", price: "445.00" },
  { tid: 284593, date: 1384972957, amount: "0.57770000", price: "432.72" },
  { tid: 284594, date: 1384972594, amount: "0.50000000", price: "399.99" },
  { tid: 284603, date: 1384972880, amount: "4.91000000", price: "407.29" },
  { tid: 284604, date: 1384972898, amount: "0.88210000", price: "453.45" },
  { tid: 284605, date: 1384972520, amount: "0.66000000", price: "414.12" },
  { tid: 284607, date: 1384973743, amount: "0.12640000", price: "395.43" },
  { tid: 284611, date: 1384973152, amount: "4.62000000", price: "433.23" },
  { tid: 284619, date: 1384973279, amount: "0.18000000", price: "448.75" },
  { tid: 284625, date: 1384973562, amount: "1.00000000", price: "450.00" },
  { tid: 284628, date: 1384973492, amount: "0.13160000", price: "456.00" },
  { tid: 284629, date: 1384973464, amount: "1.19190000", price: "463.11" },
  { tid: 284630, date: 1384973271, amount: "0.15390000", price: "454.80" },
  { tid: 284631, date: 1384973522, amount: "0.54700000", price: "457.06" },
  { tid: 284632, date: 1384973784, amount: "1.00410000", price: "453.83" },
  { tid: 284633, date: 1384973621, amount: "0.09870000", price: "455.71" },
  { tid: 284637, date: 1384974464, amount: "0.10000000", price: "444.87" },
  { tid: 284650, date: 1384974103, amount: "0.44360000", price: "450.83" },
  { tid: 284651, date: 1384974083, amount: "0.33060000", price: "484.02" },
  { tid: 284653, date: 1384974560, amount: "0.30000000", price: "444.89" },
  { tid: 284654, date: 1384974731, amount: "0.08980000", price: "449.66" },
  { tid: 284655, date: 1384974710, amount: "0.60000000", price: "449.53" },
  { tid: 284661, date: 1384974984, amount: "0.36000000", price: "454.99" },
  { tid: 284669, date: 1384975702, amount: "2.00000000", price: "446.75" },
  { tid: 284672, date: 1384975236, amount: "0.29760000", price: "449.53" },
  { tid: 284673, date: 1384975178, amount: "0.05510000", price: "453.43" },
  { tid: 284675, date: 1384974903, amount: "0.23000000", price: "449.53" },
  { tid: 284676, date: 1384974907, amount: "1.00000000", price: "457.00" },
  { tid: 284677, date: 1384975764, amount: "0.34260000", price: "437.84" },
  { tid: 284685, date: 1384975975, amount: "1.00000000", price: "447.00" },
  { tid: 284693, date: 1384976011, amount: "2.70640000", price: "443.40" },
  { tid: 284694, date: 1384975898, amount: "1.00000000", price: "409.83" },
  { tid: 284697, date: 1384976151, amount: "1.71000000", price: "419.46" },
  { tid: 284698, date: 1384976269, amount: "1.38000000", price: "399.93" },
  { tid: 284700, date: 1384976472, amount: "0.21000000", price: "441.84" },
  { tid: 284710, date: 1384976723, amount: "1.00000000", price: "453.31" },
  { tid: 284711, date: 1384976773, amount: "0.37630000", price: "457.89" },
  { tid: 284716, date: 1384977136, amount: "0.16970000", price: "441.84" },
  { tid: 284717, date: 1384976763, amount: "0.41000000", price: "441.84" },
  { tid: 284720, date: 1384976975, amount: "0.98920000", price: "427.60" },
  { tid: 284721, date: 1384977309, amount: "0.02190000", price: "456.84" },
  { tid: 284725, date: 1384978367, amount: "3.07950000", price: "480.60" },
  { tid: 284728, date: 1384978256, amount: "0.52680000", price: "408.15" },
  { tid: 284732, date: 1384978367, amount: "0.13190000", price: "379.19" },
  { tid: 284733, date: 1384978064, amount: "0.15820000", price: "379.19" },
  { tid: 284734, date: 1384977628, amount: "1.05490000", price: "379.19" },
  { tid: 284739, date: 1384977622, amount: "4.59770000", price: "435.00" },
  { tid: 284740, date: 1384978191, amount: "0.20000000", price: "449.53" },
  { tid: 284742, date: 1384978342, amount: "0.35900000", price: "431.18" },
  { tid: 284746, date: 1384978863, amount: "0.13490000", price: "444.87" },
  { tid: 284747, date: 1384978609, amount: "7.82000000", price: "409.17" },
  { tid: 284750, date: 1384978992, amount: "0.43000000", price: "408.85" },
  { tid: 284752, date: 1384978700, amount: "0.29770000", price: "389.60" },
  { tid: 284758, date: 1384978597, amount: "0.03500000", price: "457.00" },
  { tid: 284761, date: 1384979001, amount: "1.00000000", price: "427.21" },
  { tid: 284762, date: 1384979323, amount: "0.70000000", price: "423.68" },
  { tid: 284763, date: 1384979346, amount: "0.13250000", price: "441.15" },
  { tid: 284770, date: 1384980260, amount: "0.23520000", price: "386.93" },
  { tid: 284777, date: 1384980159, amount: "0.23250000", price: "430.03" },
  { tid: 284785, date: 1384980824, amount: "1.00210000", price: "408.15" },
  { tid: 284792, date: 1384980473, amount: "0.56210000", price: "444.74" },
  { tid: 284793, date: 1384980312, amount: "1.04560000", price: "444.74" },
  { tid: 284795, date: 1384980478, amount: "0.34350000", price: "436.72" },
  { tid: 284796, date: 1384980373, amount: "0.33940000", price: "441.92" },
  { tid: 284806, date: 1384982076, amount: "0.99970000", price: "390.25" },
  { tid: 284807, date: 1384981778, amount: "2.00000000", price: "383.88" },
  { tid: 284808, date: 1384981227, amount: "2.00000000", price: "425.00" },
  { tid: 284810, date: 1384981505, amount: "0.28310000", price: "423.95" },
  { tid: 284811, date: 1384981745, amount: "0.38890000", price: "475.68" },
  { tid: 284814, date: 1384982869, amount: "0.19000000", price: "408.33" },
  { tid: 284824, date: 1384982487, amount: "0.16000000", price: "435.00" },
  { tid: 284825, date: 1384982327, amount: "2.35290000", price: "425.00" },
  { tid: 284827, date: 1384982457, amount: "0.33110000", price: "438.00" },
  { tid: 284829, date: 1384982973, amount: "1.00000000", price: "400.00" },
  { tid: 284833, date: 1384982301, amount: "0.00240000", price: "421.10" },
  { tid: 284835, date: 1384982723, amount: "0.07250000", price: "413.90" },
  { tid: 284854, date: 1384983742, amount: "0.23610000", price: "423.50" },
  { tid: 284870, date: 1384984686, amount: "0.16230000", price: "431.18" },
  { tid: 284874, date: 1384984185, amount: "3.85720000", price: "414.03" },
  { tid: 284875, date: 1384984735, amount: "0.11600000", price: "431.17" },
  { tid: 284878, date: 1384984310, amount: "0.11800000", price: "423.89" },
  { tid: 284879, date: 1384984698, amount: "0.62660000", price: "399.00" },
  { tid: 284880, date: 1384984497, amount: "1.75440000", price: "399.00" },
  { tid: 284881, date: 1384984676, amount: "0.21450000", price: "419.57" },
  { tid: 284899, date: 1384985006, amount: "0.47620000", price: "399.00" },
  { tid: 284900, date: 1384984842, amount: "0.78450000", price: "399.00" },
  { tid: 284901, date: 1384985133, amount: "0.05930000", price: "421.79" },
  { tid: 284902, date: 1384985673, amount: "0.25060000", price: "399.00" },
  { tid: 284903, date: 1384985502, amount: "0.24350000", price: "410.60" },
  { tid: 284908, date: 1384986354, amount: "0.20000000", price: "400.88" },
  { tid: 284916, date: 1384985834, amount: "2.38100000", price: "399.00" },
  { tid: 284917, date: 1384986536, amount: "4.87090000", price: "410.60" },
  { tid: 284919, date: 1384986576, amount: "2.50000000", price: "407.78" },
  { tid: 284926, date: 1384986667, amount: "0.06580000", price: "410.60" },
  { tid: 284927, date: 1384986777, amount: "0.06990000", price: "407.78" },
  { tid: 284928, date: 1384987347, amount: "2.00000000", price: "362.04" },
  { tid: 284929, date: 1384987333, amount: "0.12340000", price: "405.09" },
  { tid: 284930, date: 1384987478, amount: "0.24740000", price: "423.59" },
  { tid: 284932, date: 1384987622, amount: "1.00000000", price: "510.00" },
  { tid: 284934, date: 1384987650, amount: "0.28000000", price: "361.82" },
  { tid: 284946, date: 1384988295, amount: "0.24810000", price: "403.00" },
  { tid: 284948, date: 1384987846, amount: "0.24810000", price: "403.00" },
  { tid: 284949, date: 1384987533, amount: "0.06460000", price: "464.15" },
  { tid: 284951, date: 1384988063, amount: "0.34000000", price: "403.00" },
  { tid: 284952, date: 1384988192, amount: "0.30000000", price: "403.00" },
  { tid: 284954, date: 1384987803, amount: "0.07280000", price: "411.91" },
  { tid: 284955, date: 1384987876, amount: "0.09710000", price: "411.91" },
  { tid: 284956, date: 1384988385, amount: "3.00000000", price: "411.91" },
  { tid: 284957, date: 1384988686, amount: "1.00000000", price: "429.00" },
  { tid: 284961, date: 1384988953, amount: "0.31330000", price: "399.00" },
  { tid: 284967, date: 1384988445, amount: "1.00000000", price: "411.91" },
  { tid: 284968, date: 1384988896, amount: "1.19770000", price: "413.30" },
  { tid: 284969, date: 1384988645, amount: "0.20380000", price: "412.14" },
  { tid: 284971, date: 1384988923, amount: "0.13140000", price: "418.54" },
  { tid: 284972, date: 1384989043, amount: "0.06450000", price: "418.54" },
  { tid: 284975, date: 1384989808, amount: "0.80000000", price: "384.84" },
  { tid: 284982, date: 1384989613, amount: "0.14570000", price: "411.91" },
  { tid: 284984, date: 1384989317, amount: "0.04040000", price: "413.96" },
  { tid: 284985, date: 1384989310, amount: "0.18580000", price: "403.74" },
  { tid: 284986, date: 1384989520, amount: "0.63900000", price: "403.74" },
  { tid: 285000, date: 1384990673, amount: "0.99790000", price: "403.86" },
  { tid: 285003, date: 1384991085, amount: "0.49840000", price: "413.30" },
  { tid: 285006, date: 1384991356, amount: "18.29990000", price: "386.38" },
  { tid: 285012, date: 1384991368, amount: "0.66850000", price: "403.86" },
  { tid: 285014, date: 1384991915, amount: "0.34150000", price: "409.99" },
  { tid: 285015, date: 1384991926, amount: "0.26000000", price: "409.99" },
  { tid: 285016, date: 1384991715, amount: "1.08540000", price: "409.99" },
  { tid: 285018, date: 1384991622, amount: "0.41000000", price: "409.99" },
  { tid: 285024, date: 1384992509, amount: "0.55650000", price: "413.30" },
  { tid: 285026, date: 1384992544, amount: "0.43550000", price: "413.30" },
  { tid: 285028, date: 1384992371, amount: "0.71430000", price: "419.99" },
  { tid: 285036, date: 1384993305, amount: "0.09000000", price: "392.98" },
  { tid: 285041, date: 1384993448, amount: "1.00000000", price: "419.00" },
  { tid: 285043, date: 1384993171, amount: "1.05000000", price: "425.00" },
  { tid: 285046, date: 1384993702, amount: "0.35130000", price: "427.00" },
  { tid: 285071, date: 1384995179, amount: "0.23970000", price: "417.12" },
  { tid: 285072, date: 1384995296, amount: "1.00000000", price: "417.12" },
  { tid: 285074, date: 1384996328, amount: "0.18130000", price: "441.36" },
  { tid: 285079, date: 1384996474, amount: "0.04740000", price: "422.12" },
  { tid: 285080, date: 1384995717, amount: "2.00000000", price: "427.00" },
  { tid: 285081, date: 1384996197, amount: "0.11860000", price: "421.41" },
  { tid: 285083, date: 1384995876, amount: "0.41870000", price: "417.97" },
  { tid: 285084, date: 1384996007, amount: "0.04790000", price: "417.97" },
  { tid: 285088, date: 1384996465, amount: "0.47790000", price: "418.50" },
  { tid: 285104, date: 1384997716, amount: "1.00000000", price: "418.00" },
  { tid: 285105, date: 1384997863, amount: "0.31100000", price: "418.00" },
  { tid: 285111, date: 1384999067, amount: "0.49700000", price: "418.50" },
  { tid: 285115, date: 1384999020, amount: "0.02390000", price: "418.50" },
  { tid: 285116, date: 1384998968, amount: "0.03000000", price: "418.50" },
  { tid: 285119, date: 1384998809, amount: "0.47850000", price: "418.00" },
  { tid: 285127, date: 1384999383, amount: "0.11950000", price: "418.50" },
  { tid: 285129, date: 1384999274, amount: "0.23640000", price: "423.00" },
  { tid: 285142, date: 1385002435, amount: "0.14340000", price: "418.50" },
  { tid: 285145, date: 1385002480, amount: "0.42790000", price: "423.00" },
  { tid: 285162, date: 1385004008, amount: "0.50000000", price: "459.97" },
  { tid: 285163, date: 1385004253, amount: "0.13500000", price: "397.39" },
  { tid: 285170, date: 1385005029, amount: "1.00000000", price: "380.80" },
  { tid: 285215, date: 1385012256, amount: "1.95670000", price: "434.40" },
  { tid: 285243, date: 1385016050, amount: "0.34670000", price: "432.68" },
  { tid: 285259, date: 1385019262, amount: "0.48000000", price: "435.00" },
  { tid: 285262, date: 1385020689, amount: "1.00000000", price: "434.77" },
  { tid: 285266, date: 1385021442, amount: "0.27920000", price: "434.77" },
  { tid: 285270, date: 1385022268, amount: "2.00000000", price: "434.77" },
  { tid: 285278, date: 1385022786, amount: "1.00000000", price: "435.00" },
  { tid: 285282, date: 1385023642, amount: "1.01000000", price: "434.77" },
  { tid: 285283, date: 1385023978, amount: "0.60000000", price: "434.77" },
  { tid: 285287, date: 1385025251, amount: "0.02970000", price: "438.00" },
  { tid: 285288, date: 1385025166, amount: "1.00000000", price: "438.00" },
  { tid: 285290, date: 1385024510, amount: "0.25290000", price: "435.00" },
  { tid: 285293, date: 1385025236, amount: "1.00000000", price: "445.24" },
  { tid: 285294, date: 1385025107, amount: "1.00000000", price: "438.00" },
  { tid: 285295, date: 1385024936, amount: "1.33800000", price: "448.44" },
  { tid: 285298, date: 1385025338, amount: "1.00000000", price: "438.00" },
  { tid: 285299, date: 1385025311, amount: "0.10000000", price: "438.00" },
  { tid: 285300, date: 1385025362, amount: "0.12510000", price: "423.57" },
  { tid: 285301, date: 1385025697, amount: "0.05700000", price: "438.49" },
  { tid: 285302, date: 1385025777, amount: "0.34500000", price: "434.77" },
  { tid: 285303, date: 1385025422, amount: "0.03500000", price: "428.16" },
  { tid: 285304, date: 1385025456, amount: "0.12380000", price: "428.16" },
  { tid: 285305, date: 1385025753, amount: "0.17920000", price: "446.52" },
  { tid: 285306, date: 1385025411, amount: "0.45310000", price: "434.77" },
  { tid: 285307, date: 1385026011, amount: "0.10000000", price: "448.27" },
  { tid: 285308, date: 1385025478, amount: "0.07860000", price: "445.10" },
  { tid: 285309, date: 1385025407, amount: "1.00000000", price: "435.00" },
  { tid: 285310, date: 1385025925, amount: "0.22280000", price: "448.91" },
  { tid: 285311, date: 1385026195, amount: "1.14160000", price: "438.00" },
  { tid: 285317, date: 1385026215, amount: "1.79710000", price: "445.15" },
  { tid: 285319, date: 1385026531, amount: "0.08000000", price: "416.67" },
  { tid: 285321, date: 1385026612, amount: "0.10420000", price: "480.00" },
  { tid: 285322, date: 1385026941, amount: "1.00000000", price: "410.00" },
  { tid: 285324, date: 1385027939, amount: "0.10260000", price: "536.24" },
  { tid: 285325, date: 1385027988, amount: "1.12000000", price: "453.40" },
  { tid: 285327, date: 1385027695, amount: "6.42520000", price: "466.91" },
  { tid: 285330, date: 1385027276, amount: "3.90800000", price: "435.00" },
  { tid: 285331, date: 1385027423, amount: "1.11490000", price: "448.47" },
  { tid: 285333, date: 1385027983, amount: "1.00000000", price: "438.00" },
  { tid: 285334, date: 1385027219, amount: "0.50200000", price: "442.24" },
  { tid: 285335, date: 1385027333, amount: "1.30000000", price: "443.43" },
  { tid: 285336, date: 1385027477, amount: "1.35170000", price: "435.00" },
  { tid: 285338, date: 1385027837, amount: "0.37030000", price: "432.11" },
  { tid: 285342, date: 1385028734, amount: "0.45660000", price: "438.00" },
  { tid: 285344, date: 1385028304, amount: "0.34250000", price: "438.00" },
  { tid: 285345, date: 1385028218, amount: "0.22830000", price: "438.00" },
  { tid: 285346, date: 1385028348, amount: "0.39860000", price: "444.00" },
  { tid: 285348, date: 1385028701, amount: "1.83910000", price: "435.00" },
  { tid: 285349, date: 1385028579, amount: "0.44000000", price: "410.02" },
  { tid: 285350, date: 1385028884, amount: "0.11320000", price: "441.51" },
  { tid: 285354, date: 1385029077, amount: "12.00000000", price: "397.10" },
  { tid: 285355, date: 1385029244, amount: "2.00000000", price: "407.31" },
  { tid: 285358, date: 1385029083, amount: "2.50000000", price: "409.10" },
  { tid: 285359, date: 1385028917, amount: "0.22710000", price: "440.34" },
  { tid: 285360, date: 1385029015, amount: "0.22990000", price: "435.00" },
  { tid: 285361, date: 1385029002, amount: "0.22880000", price: "437.14" },
];

function convertToOHLC(data) {
  data.sort((a, b) => d3.ascending(a.date, b.date));
  var result = [];
  data.forEach((d) => {
    d.date = new Date(d.date).toISOString().substring(0, 10);
  });

  var allDates = [...new Set(data.map((d) => d.date))];
  allDates.forEach((d) => {
    var minuteCounter = 0;
    var hourCounter = 9;
    var halfTime = new Date(new Date(d).setHours(12, 30));
    var halfTimeBegin = new Date(new Date(d).setHours(14, 30));
    var fullTime = new Date(new Date(d).setHours(17, 0));
    while (
      new Date(new Date(d).setHours(hourCounter, minuteCounter)) < fullTime
    ) {
      if (
        new Date(new Date(d).setHours(hourCounter, minuteCounter)) < halfTime ||
        new Date(new Date(d).setHours(hourCounter, minuteCounter)) >=
          halfTimeBegin
      ) {
        var currentTime = new Date(
          new Date(d).setHours(hourCounter, minuteCounter)
        );
        var nextMinute = new Date(
          new Date(d).setHours(hourCounter, minuteCounter)
        );
        nextMinute.setMinutes(nextMinute.getMinutes() + 1);
        var tempObject = {};
        var filteredData = [];
        var filteredBData = [];
        var filteredSData = [];
        for (var i = 0; i < data.length; i++) {
          if (data[i].date >= currentTime && data[i].date <= nextMinute) {
            filteredData.push(data[i]);
            if (data[i].mode === "B") {
              filteredBData.push(data[i]);
            } else if (data[i].mode === "S") {
              filteredSData.push(data[i]);
            }
          } else {
            break;
          }
        }
        var matchedLength = filteredData.length;
        data = data.splice(matchedLength);
        tempObject.date = currentTime;
        tempObject.open = filteredData[0] ? filteredData[0].price : 0;
        tempObject.close = filteredData[filteredData.length - 1]
          ? filteredData[filteredData.length - 1].price
          : 0;
        tempObject.high = d3.max(filteredData, (e) => e.price) || 0;
        tempObject.low = d3.min(filteredData, (e) => e.price) || 0;
        result.push(tempObject);
      }

      if (minuteCounter === 59) {
        hourCounter += 1;
        minuteCounter = 0;
      } else {
        minuteCounter += 1;
      }
    }
  });
  return result;
}
let groupData = convertToOHLC(Stockdata);
